# Phase 1 (recovered)

## –ü—Ä–∏–Ω—Ü–∏–ø—ã

- –ú—ã **–Ω–µ –∫–ª–æ–Ω–∏—Ä—É–µ–º** –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ —Ü–µ–ª–∏–∫–æ–º. –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –¥–µ–ª–∞–µ–º **–º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∞–¥–∞–ø—Ç–µ—Ä—ã/–æ–±—ë—Ä—Ç–∫–∏** –∏ –∑–∞–∫—Ä—ã–≤–∞–µ–º –ø—Ä–æ–±–µ–ª—ã **–ø–æ –º–µ—Ä–µ —Ä–∞–±–æ—Ç—ã** —Å –∞–¥–º–∏–Ω–∫–∞–º–∏/–≤–∏—Ç—Ä–∏–Ω–æ–π.
- –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç ‚Äî **–≥–æ—Ç–æ–≤—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏**; —Å–∞–º–æ–ø–∏—Å ‚Äî —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω–µ—Ç –∞–¥–µ–∫–≤–∞—Ç–Ω–æ–≥–æ –∞–Ω–∞–ª–æ–≥–∞.
- –õ—é–±—ã–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è —Ñ–∏–∫—Å–∏—Ä—É–µ–º –≤ UI‚Äë–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ö –∏ –º–∞—Ç—Ä–∏—Ü–∞—Ö –ø–∞—Ä–∏—Ç–µ—Ç–∞.
- –ü–µ—Ä–µ–¥ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–æ–π **–ø—Ä–æ–≤–µ—Ä—è–µ–º —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏** –∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, —á—Ç–æ–±—ã –Ω–µ –ø–∏—Å–∞—Ç—å –ª–∏—à–Ω–∏–π –∫–æ–¥.

–°–º. –±–∞–∑–æ–≤—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏:
- [UI parity (admin + storefront)](./ui-parity.md)
- [Admin libraries parity](./admin-libraries-parity.md)
- [Admin reuse matrix](./admin-reuse-matrix.md)
- [Tech parity tracker](./tech-parity.md)
- [Storefront overview](./storefront.md)

---

## Phase 1 ‚Äî —á–µ–∫‚Äë–ª–∏—Å—Ç (–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –ø–æ –∫–æ–¥—É)

### –ê–¥–º–∏–Ω–∫–∏ (Leptos + Next.js)

–ü–µ—Ä–µ–¥ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–æ–π **–ø—Ä–æ–≤–µ—Ä—è–µ–º —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏** –∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, —á—Ç–æ–±—ã –Ω–µ –ø–∏—Å–∞—Ç—å –ª–∏—à–Ω–∏–π –∫–æ–¥.

| –†–∞–±–æ—Ç–∞ | Leptos | Next |
| --- | --- | --- |
| –ë–∞–∑–æ–≤—ã–π layout –∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω—ã–π shell –∞–¥–º–∏–Ω–∫–∏. | ‚úÖ | ‚úÖ |
| Dashboard/–≥–ª–∞–≤–Ω–∞—è –∞–¥–º–∏–Ω–∫–∏. | ‚úÖ | ‚úÖ |
| –°—Ç—Ä–∞–Ω–∏—Ü—ã –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏: login / register / reset. | ‚úÖ | ‚úÖ |
| –°—Ç—Ä–∞–Ω–∏—Ü–∞ Security. | ‚úÖ | ‚úÖ |
| –°—Ç—Ä–∞–Ω–∏—Ü–∞ Profile. | ‚úÖ | ‚úÖ |
| Users list —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏/–ø–æ–∏—Å–∫–æ–º –∏ –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π (REST + GraphQL –∑–∞–ø—Ä–æ—Å—ã). | ‚úÖ | ‚úÖ |
| User details (–∫–∞—Ä—Ç–æ—á–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è). | ‚úÖ | ‚¨ú |
| Auth‚Äëguard (–∑–∞—â–∏—Ç–∞ –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤). | ‚úÖ | ‚úÖ |
| –ë–∞–∑–æ–≤—ã–µ UI‚Äë–ø—Ä–∏–º–∏—Ç–∏–≤—ã (PageHeader, –∫–Ω–æ–ø–∫–∏, –∏–Ω–ø—É—Ç—ã) –≤ shadcn‚Äëstyle. | ‚úÖ | ‚úÖ |
| i18n (RU/EN). | ‚úÖ | ‚úÖ |

### Storefront (Leptos SSR + Next.js)

–ü–µ—Ä–µ–¥ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–æ–π **–ø—Ä–æ–≤–µ—Ä—è–µ–º —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏** –∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, —á—Ç–æ–±—ã –Ω–µ –ø–∏—Å–∞—Ç—å –ª–∏—à–Ω–∏–π –∫–æ–¥.

| –†–∞–±–æ—Ç–∞ | Leptos | Next |
| --- | --- | --- |
| Landing‚Äëshell (hero + CTA + –æ—Å–Ω–æ–≤–Ω–æ–π layout). | ‚úÖ | ‚úÖ |
| –ë–ª–æ–∫–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (–∫–∞—Ä—Ç–æ—á–∫–∏/—Ñ–∏—á–∏/–∫–æ–ª–ª–µ–∫—Ü–∏–∏). | ‚úÖ | ‚úÖ |
| –ë–ª–æ–∫–∏ –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–∞/–∏–Ω—Ñ–æ (alert/—Å—Ç–∞—Ç—ã/–∏—Å—Ç–æ—Ä–∏—è –±—Ä–µ–Ω–¥–∞/–ø–æ–¥–ø–∏—Å–∫–∞). | ‚úÖ | ‚úÖ |
| i18n / –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è –≤–∏—Ç—Ä–∏–Ω—ã. | ‚úÖ | ‚úÖ |
| Tailwind‚Äë—Å—Ç–∏–ª–∏ –∏ –±–∞–∑–æ–≤–∞—è —Ç–µ–º–∞ (DaisyUI/shadcn‚Äëstyle). | ‚úÖ | ‚úÖ |
| SSR‚Äë—Å–µ—Ä–≤–µ—Ä + –æ—Ç–¥–∞—á–∞ CSS‚Äë–±–∞–Ω–¥–ª–∞. | ‚úÖ | ‚¨ú |

---

## Phase 2.1 ‚Äî Users vertical slice (—Ç–æ–ª—å–∫–æ —Ä–∞–±–æ—Ç—ã)

| –†–∞–±–æ—Ç–∞ | Leptos | Next |
| --- | --- | --- |
| i18n foundation: –∫–ª—é—á–µ–≤—ã–µ –Ω–µ–π–º—Å–ø–µ–π—Å—ã `app/auth/users/errors`. | ‚¨ú | ‚¨ú |
| i18n foundation: –≤—ã–Ω–æ—Å —Å—Ç—Ä–æ–∫ –≤ –¥–æ–º–µ–Ω–Ω—ã–µ –º–æ–¥—É–ª–∏/—Ñ–∞–π–ª—ã. | ‚¨ú | ‚¨ú |
| i18n foundation: –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è API –æ—à–∏–±–æ–∫ (`errors.*`). | ‚¨ú | ‚¨ú |
| Auth wiring: `POST /api/auth/login`. | ‚¨ú | ‚¨ú |
| Auth wiring: `GET /api/auth/me` (bootstrap). | ‚¨ú | ‚¨ú |
| Auth wiring: —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ (cookie/localStorage). | ‚¨ú | ‚¨ú |
| Users list: GraphQL `users` (pagination). | ‚¨ú | ‚¨ú |
| Users list: —Ñ–∏–ª—å—Ç—Ä—ã –∏ –ø–æ–∏—Å–∫. | ‚¨ú | ‚¨ú |
| Users table parity: –∫–æ–ª–æ–Ω–∫–∏ `email/name/role/status/created_at`. | ‚¨ú | ‚¨ú |
| Users detail view: GraphQL `user(id)`. | ‚¨ú | ‚¨ú |
| Users CRUD: `createUser` mutation. | ‚¨ú | ‚¨ú |
| Users CRUD: `updateUser` mutation. | ‚¨ú | ‚¨ú |
| Users CRUD: `disableUser` mutation. | ‚¨ú | ‚¨ú |
| Users CRUD: —Ñ–æ—Ä–º—ã, –æ—à–∏–±–∫–∏, —Ç–æ—Å—Ç—ã. | ‚¨ú | ‚¨ú |
| RBAC: –ø—Ä–∞–≤–∞ `users.create/users.update/users.manage`. | ‚¨ú | ‚¨ú |
| Shared UI/UX: layout/nav parity. | ‚¨ú | ‚¨ú |
| Shared UI/UX: breadcrumbs. | ‚¨ú | ‚¨ú |
| Shared UI/UX: form patterns. | ‚¨ú | ‚¨ú |
| Shared UI/UX: toasts/alerts. | ‚¨ú | ‚¨ú |

---

## Phase 3 ‚Äî Admin Auth & User Security (—Ç–æ–ª—å–∫–æ —Ä–∞–±–æ—Ç—ã)

| –†–∞–±–æ—Ç–∞ | Leptos | Next |
| --- | --- | --- |
| Login page: tenant slug + email + password. | ‚¨ú | ‚¨ú |
| Login UX: –æ—à–∏–±–∫–∏/–≤–∞–ª–∏–¥–∞—Ü–∏—è, loading/empty states. | ‚¨ú | ‚¨ú |
| Language switch + persistence. | ‚¨ú | ‚¨ú |
| Password reset: request email. | ‚¨ú | ‚¨ú |
| Password reset: token + new password. | ‚¨ú | ‚¨ú |
| Password reset: token expiry UI. | ‚¨ú | ‚¨ú |
| Email verification: verify + resend action. | ‚¨ú | ‚¨ú |
| Registration: sign‚Äëup (email + password + tenant). | ‚¨ú | ‚¨ú |
| Registration: optional name + password strength hints. | ‚¨ú | ‚¨ú |
| Invite onboarding: accept invite + expired invite UX. | ‚¨ú | ‚¨ú |
| Profile page: name/avatar/timezone/language. | ‚¨ú | ‚¨ú |
| Change password: current password + policy hints. | ‚¨ú | ‚¨ú |
| Active sessions list + ‚Äúsign out all‚Äù. | ‚¨ú | ‚¨ú |
| Login history (success/failed, timestamps/IP). | ‚¨ú | ‚¨ú |
| Admin auth middleware/guard (private routes). | ‚¨ú | ‚¨ú |
| Token storage + refresh strategy (cookie/localStorage). | ‚¨ú | ‚¨ú |
| Logout flow (–æ—á–∏—Å—Ç–∫–∞ —Ç–æ–∫–µ–Ω–∞/—Å–µ—Å—Å–∏–∏). | ‚¨ú | ‚¨ú |
| RBAC checks for admin-only GraphQL/REST. | ‚¨ú | ‚¨ú |
| RU/EN coverage for auth/profile UI + validation. | ‚¨ú | ‚¨ú |
| Localized email templates: verify/reset/invite. | ‚¨ú | ‚¨ú |
| Admin route map: `/login` `/register` `/reset` `/profile` `/security`. | ‚¨ú | ‚¨ú |
| Audit events: login/password change/session invalidation/invite. | ‚¨ú | ‚¨ú |

---

## Phase 4 ‚Äî –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è UI‚Äë—à–∞–±–ª–æ–Ω–∞ –¥–ª—è –∞–¥–º–∏–Ω–æ–∫ (—Ç–æ–ª—å–∫–æ —Ä–∞–±–æ—Ç—ã)

| –†–∞–±–æ—Ç–∞ | Leptos | Next |
| --- | --- | --- |
| –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞: –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å —Ü–µ–ª–∏ –∏ scope Phase 3. | ‚¨ú | ‚¨ú |
| –ò–Ω–≤–µ–Ω—Ç–∞—Ä–∏–∑–∞—Ü–∏—è —à–∞–±–ª–æ–Ω–∞: —Å—Ç—Ä–∞–Ω–∏—Ü—ã, layout, –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, —Ç–æ–∫–µ–Ω—ã. | ‚¨ú | ‚¨ú |
| –ò–Ω–≤–µ–Ω—Ç–∞—Ä–∏–∑–∞—Ü–∏—è —Ç–µ–∫—É—â–∏—Ö –∞–¥–º–∏–Ω–æ–∫: –º–∞—Ä—à—Ä—É—Ç—ã, —Å–æ—Å—Ç–æ—è–Ω–∏—è, —Ñ–æ—Ä–º—ã/—Ç–∞–±–ª–∏—Ü—ã. | ‚¨ú | ‚¨ú |
| –°–æ–≥–ª–∞—Å–æ–≤–∞—Ç—å UI‚Äë–∫–æ–Ω—Ç—Ä–∞–∫—Ç (layout/sidebar/header, –±–∞–∑–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã). | ‚¨ú | ‚¨ú |
| –ö–∞—Ä—Ç–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–π: —Å—Ç—Ä–∞–Ω–∏—Ü—ã Template ‚Üí RusToK. | ‚¨ú | ‚¨ú |
| –ö–∞—Ä—Ç–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–π: –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã Template ‚Üí shadcn/ui/internal. | ‚¨ú | ‚¨ú |
| –ö–∞—Ä—Ç–∞ —Ç–æ–∫–µ–Ω–æ–≤: —Ü–≤–µ—Ç–∞/–æ—Ç—Å—Ç—É–ø—ã/—Ç–∏–ø–æ–≥—Ä–∞—Ñ–∏–∫–∞ ‚Üí –¥–∏–∑–∞–π–Ω‚Äë—Ç–æ–∫–µ–Ω—ã. | ‚¨ú | ‚¨ú |
| Next.js: —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å/—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —à–∞–±–ª–æ–Ω–∞. | ‚¨ú | ‚¨ú |
| Next.js: –ø–æ–¥–∫–ª—é—á–∏—Ç—å layout/nav –ø–æ–¥ –∫–æ–Ω—Ç—Ä–∞–∫—Ç. | ‚¨ú | ‚¨ú |
| Next.js: –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –∫–ª—é—á–µ–≤—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (Login/Register/Reset/Profile/Security). | ‚¨ú | ‚¨ú |
| Next.js: Users list/details + Dashboard widgets. | ‚¨ú | ‚¨ú |
| Next.js: —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å i18n –ø–æ–¥ –Ω–æ–≤—ã–µ UI –±–ª–æ–∫–∏. | ‚¨ú | ‚¨ú |
| Next.js: –ø–æ–¥–∫–ª—é—á–∏—Ç—å API-–∫–ª–∏–µ–Ω—Ç—ã –∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è (loading/error/empty). | ‚¨ú | ‚¨ú |
| Leptos: —Å–æ–∑–¥–∞—Ç—å —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç—ã —à–∞–±–ª–æ–Ω–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤. | ‚¨ú | ‚¨ú |
| Leptos: –≤—ã—Ä–æ–≤–Ω—è—Ç—å layout/nav —Å Next.js. | ‚¨ú | ‚¨ú |
| Leptos: –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Ç–µ–º –∂–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º. | ‚¨ú | ‚¨ú |
| Leptos: —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å i18n. | ‚¨ú | ‚¨ú |
| Leptos: –ø–æ–¥–∫–ª—é—á–∏—Ç—å API-—Å–ª–æ–π –∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è. | ‚¨ú | ‚¨ú |
| –ü–∞—Ä–∏—Ç–µ—Ç: –≤–∏–∑—É–∞–ª—å–Ω—ã–π parity (Login/Users/Profile). | ‚¨ú | ‚¨ú |
| QA: –ø–æ–≤–µ–¥–µ–Ω–∏–µ (–≤–∞–ª–∏–¥–∞—Ü–∏—è/–æ—à–∏–±–∫–∏/–∑–∞–≥—Ä—É–∑–∫–∞). | ‚¨ú | ‚¨ú |
| QA: –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å (–∫–æ–Ω—Ç—Ä–∞—Å—Ç, —Ñ–æ–∫—É—Å, aria). | ‚¨ú | ‚¨ú |
| QA: –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (bundle/—Ä–µ–Ω–¥–µ—Ä). | ‚¨ú | ‚¨ú |
| –ü–ª–∞–Ω –≤–Ω–µ–¥—Ä–µ–Ω–∏—è: –ø–æ—Ä—è–¥–æ–∫ —ç—Ç–∞–ø–æ–≤ + –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏. | ‚¨ú | ‚¨ú |
| –ü–ª–∞–Ω –æ—Ç–∫–∞—Ç–∞: —Ñ–∏—á–∞‚Äë—Ñ–ª–∞–≥/—Ä–µ–ª–∏–∑–Ω—ã–π –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å. | ‚¨ú | ‚¨ú |
| Definition of Done (DoD): –ø–∞—Ä–∏—Ç–µ—Ç, –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è, –±–µ–∑ —Ä–µ–≥—Ä–µ—Å—Å–∏–π, –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è. | ‚¨ú | ‚¨ú |

---

## Phase 2.1 ‚Äî Users vertical slice (–ø–æ–ª–Ω—ã–π —Ç–µ–∫—Å—Ç)

### Goals

This document defines **Phase 2.1** (the Users vertical slice) and is the source of truth for completion status.

Build a production-ready **Users** vertical slice with **auth + list + details + CRUD + i18n** in both admin frontends (Leptos and Next). The scope below is the minimal, iterative path to parity across both UIs.

### Scope (what we ship in this phase)

1. **i18n foundation**
   - Centralize strings to avoid growth in `locale.rs` / `messages/*.json`.
   - Agree on key namespaces: `app.*`, `auth.*`, `users.*`, `errors.*`.
   - Add translations for API errors on all pages (same approach already used in users).
2. **Users v1 (data wiring)**
   - REST auth: `/api/auth/login`, `/api/auth/me`.
   - GraphQL: `users` list (pagination), `user(id)` details.
   - Token storage (JWT) used by Leptos + Next.
3. **Admin Users table parity**
   - Columns: `email`, `name`, `role`, `status`, `created_at`.
   - Pagination, filtering, search.
4. **Users CRUD (GraphQL)**
   - Mutations for `create`, `update`, `disable` user.
   - RBAC permissions for manage/update.
5. **Shared UI/UX**
   - Layout/Navigation, Breadcrumbs, Toasts, Form patterns.

### API contracts (target shape)

#### REST

- `POST /api/auth/login`
  - Request: `{ email, password }`
  - Response: `{ access_token, refresh_token?, user }`
- `GET /api/auth/me`
  - Response: `{ user }`

#### GraphQL

```graphql
query Users($pagination: PaginationInput, $filter: UsersFilter, $search: String) {
  users(pagination: $pagination, filter: $filter, search: $search) {
    edges {
      node { id email name role status createdAt }
    }
    pageInfo { totalCount }
  }
}

query User($id: ID!) {
  user(id: $id) { id email name role status createdAt }
}

mutation CreateUser($input: CreateUserInput!) {
  createUser(input: $input) { id }
}

mutation UpdateUser($id: ID!, $input: UpdateUserInput!) {
  updateUser(id: $id, input: $input) { id }
}

mutation DisableUser($id: ID!) {
  disableUser(id: $id) { id }
}
```

### i18n conventions

**Namespaces**
- `app.*` ‚Äî app-wide labels (nav, buttons).
- `auth.*` ‚Äî login/forgot/2FA.
- `users.*` ‚Äî list/detail/edit/new.
- `errors.*` ‚Äî API error codes + fallback.

**Examples**
- `users.title`, `users.table.email`, `users.table.role`.
- `errors.auth.invalid_credentials`.

### Iteration plan (step-by-step)

#### Step 1 ‚Äî i18n foundation (Leptos + Next)

**Leptos**
- Move string definitions into domain modules: `locale/app.rs`, `locale/users.rs`, `locale/errors.rs`.
- Expose a central `t(key)` helper with namespace support.
- Add translations for common API errors.

**Next**
- Split JSON files into domain subtrees (`Users`, `Auth`, `Errors`).
- Align keys with Leptos naming convention.

#### Step 2 ‚Äî Auth wiring (REST)

**Leptos**
- Implement login via `POST /api/auth/login`.
- Store token (JWT) in memory + storage (TBD: localStorage/cookie).
- Use `GET /api/auth/me` for session bootstrap.

**Next**
- Mirror login behavior and token storage.
- Add middleware guard (redirect unauthenticated).

#### Step 3 ‚Äî Users list + pagination

**Leptos**
- Wire GraphQL `users` query with `PaginationInput`.
- Add search and filter UI state.
- Render table with pagination.

**Next**
- Same GraphQL query + table UI.
- Server-side data load + pagination parameters.

#### Step 4 ‚Äî Users detail view

**Leptos**
- Add `user(id)` query and details screen.

**Next**
- Add `user(id)` page and details view.

#### Step 5 ‚Äî Users CRUD

**Backend**
- Add GraphQL mutations: `createUser`, `updateUser`, `disableUser`.
- Enforce RBAC: `users.create`, `users.update`, `users.manage`.

**Leptos + Next**
- Add create/edit forms and disable action.
- Add error handling + toast notifications.

#### Step 6 ‚Äî UI/UX shared components

- Layout/Navigation parity.
- Breadcrumbs.
- Toasts.
- Form patterns.

### Deliverables checklist

- [x] i18n refactor + aligned keys
- [x] Login flow (REST) in both apps
- [x] Users list (GraphQL) with pagination + filters
- [x] User details
- [x] CRUD mutations + RBAC
- [x] Admin UI parity + shared components

### Notes / decisions

- Token storage: decide between cookie-based (server) or localStorage (client). Must align with CORS and CSRF strategy.
- Pagination: use `PaginationInput` consistently.
- Error translation: map backend error codes to `errors.*` keys with fallback.

---

## Phase 3 ‚Äî Admin Auth & User Security (–ø–æ–ª–Ω—ã–π —Ç–µ–∫—Å—Ç)

This document outlines the Phase 3 scope for **standard** multi-language admin authentication
and user security flows. It intentionally excludes SSO/OIDC/SAML to keep the first iteration
simple and production-ready.

### Goals

- Ship a production-grade login/register experience in the admin panel.
- Provide user profile management with password change and session management.
- Ensure full RU/EN localization coverage for UI, emails, and validation.
- Keep flows consistent with multi-tenant access patterns.
- Prioritize **multi-language UX** and **parallel flow support** (registration, invites,
  password reset, and profile/security actions can be developed and shipped independently).

### In Scope (MVP)

#### 1) Authentication

- **Login page**
  - Tenant slug + email + password.
  - Clear error messages for invalid credentials and missing fields.
  - Remember language choice (persisted client-side).
  - Parallelizable: can ship while registration and reset are still in progress.
- **Password reset**
  - Request reset email.
  - Reset link with token + new password.
  - Token expiration handling.
  - Parallelizable with registration and invites.
- **Email verification**
  - Verify email after registration (or optional soft-verify for internal users).
  - Resend verification email action.
  - Parallelizable with password reset.

#### 2) Registration

- **Sign-up form**
  - Email + password + tenant slug.
  - Optional name field.
  - Password strength hints.
  - Parallelizable with login, password reset, and profile.
- **Invite-based onboarding**
  - Accept invitation links with role pre-selected.
  - Expired invitation handling.
  - Can be delivered separately from open registration.

#### 3) User Profile & Security

- **Profile page**
  - Update name, avatar, timezone, preferred language.
  - Separate user-facing language preference from admin default language.
- **Change password**
  - Requires current password.
  - Show password policy hints.
  - Parallelizable with session list.
- **Active sessions**
  - List recent sessions (device, IP, last active).
  - ‚ÄúSign out all‚Äù action.
  - Parallelizable with login history.
- **Login history**
  - Successful/failed logins with timestamps and IPs.
  - Use localized date/time formatting.

### Parallel Delivery Tracks

Each track is self-contained, can be shipped independently, and shares a small set
of reusable UI components (inputs, validation, callouts, empty states).

#### Track A ‚Äî Auth Core

- Login page (tenant + email + password).
- Auth errors and loading states.
- Language switch + persistence.

#### Track B ‚Äî Password Recovery

- Request reset email.
- Reset form with token + new password.
- Token expiry UI.

#### Track C ‚Äî Registration & Invites

- Sign-up form (with tenant).
- Invite acceptance flow.
- Email verification + resend action.

#### Track D ‚Äî Profile & Security

- Profile settings (name, avatar, timezone, language).
- Change password flow.
- Sessions + login history.

### Localization (RU/EN)

- All auth/profile UI strings are localized.
- Email templates are localized: verify email, reset password, invite.
- Locale selection persists across sessions.
- Ensure validation errors are localized and context-aware (field + error type).

### Data & Audit

- Track audit events for:
  - Logins (success/failure).
  - Password changes.
  - Session invalidations.
  - Email verification changes.
  - Invite accepted/expired events.

### UX Notes

- Keep forms minimal and mobile-friendly.
- Use inline validation with precise messages.
- Use clear empty states for sessions/log history.
- Prefer UX patterns that allow teams to develop features in parallel:
  - shared auth UI components,
  - isolated endpoints per flow,
  - independent feature flags.

### Deliverables Checklist

- RU/EN dictionary coverage for all auth/profile UI + validation.
- Email templates in RU/EN for: verify, reset, invite.
- Admin route map: `/login`, `/register`, `/reset`, `/profile`, `/security`.
- Minimal audit log schema for auth events.

### Out of Scope (Phase 3)

- SSO (OIDC/SAML).
- Passwordless magic links.
- 2FA / TOTP (planned for future phase).

---

## Phase 3 ‚Äî Admin architecture & contracts (–ø–æ–ª–Ω—ã–π —Ç–µ–∫—Å—Ç)

This document describes the **implemented architecture** for Phase 3 admin auth/security
flows and the contracts that both admin frontends should follow.

### Runtime layers

#### Backend (`apps/server`)

Phase 3 logic lives in `apps/server/src/controllers/auth.rs` and `apps/server/src/auth.rs`.

Core responsibilities:
- Credentials login/register and token issuance.
- Password reset token generation/validation.
- Profile update.
- Password change.
- Session listing/history/revoke-all.

#### Leptos admin (`apps/admin`)

Leptos app calls server REST endpoints through shared helpers in `apps/admin/src/api/mod.rs`.
Auth state is kept in `AuthContext` with persisted:
- `rustok-admin-token`
- `rustok-admin-user`
- `rustok-admin-tenant`

This keeps all protected calls tenant-scoped without requiring repeated tenant input.

#### Next admin (`apps/next-admin`)

Next app uses locale routes (`/[locale]/*`) and cookie-based auth context:
- `rustok-admin-token`
- `rustok-admin-tenant`

Client views use direct fetch calls to `/api/auth/*`. A shared helper
`src/lib/client-auth.ts` centralizes cookie parsing.

### HTTP contract map (Phase 3)

All endpoints are under `/api/auth`.

**Public endpoints**
- `POST /login`
- `POST /register`
- `POST /reset/request`
- `POST /reset/confirm`

**Protected endpoints (Bearer + tenant header)**
- `GET /me`
- `POST /profile`
- `POST /change-password`
- `GET /sessions`
- `GET /history`
- `POST /sessions/revoke-all`

Tenant scoping is via `X-Tenant-Slug` + token tenant validation.

### Security model

#### Access token claims

Access token includes user, tenant, role, and `session_id`.
`session_id` is propagated into `CurrentUser` extractor so protected handlers
can preserve current session when revoking others.

#### Password reset token claims

Reset flow uses a dedicated JWT claim model (`PasswordResetClaims`) with:
- `tenant_id`
- `sub` (email)
- `purpose=password_reset`
- expiration (`DEFAULT_RESET_TOKEN_TTL_SECS`)

Confirm endpoint validates signature, expiry, purpose, and tenant match.

#### Session lifecycle

- Login/Register create refresh session records.
- `change-password` revokes all sessions except current.
- `sessions/revoke-all` revokes all sessions except current.
- `sessions` returns active sessions.
- `history` returns recent session activity entries.

### Frontend behavior contract

To keep parity between Leptos and Next:

1. **Tenant propagation**
   - On successful login/register, persist tenant.
   - Use persisted tenant for all protected requests.

2. **Error mapping**
   - `401` -> `errors.auth.unauthorized` or `errors.auth.invalid_credentials` (login).
   - non-2xx -> `errors.http`.
   - network exceptions -> `errors.network`.

3. **State model**
   - Each page exposes explicit `status` and `error` states.
   - Reset request can surface token preview in demo mode.

4. **Locale model**
   - Next uses `next-intl` dictionaries (`messages/en.json`, `messages/ru.json`).
   - Leptos uses `translate(...)` dictionaries under providers.

### Current implementation status

Implemented end-to-end:
- `/login`
- `/register`
- `/reset`
- `/profile`
- `/security` (change password + sessions + history + revoke-all)

Still open in Phase 3 scope:
- invite acceptance backend + UI flow
- email verification/resend backend + UI flow
- auth audit event surfacing in dedicated admin feed

### Sequence snapshots

#### Register

1. UI sends `POST /api/auth/register` + `X-Tenant-Slug`.
2. Server creates user and initial session.
3. Server returns access token + user info.
4. Frontend persists token + tenant + user.

#### Reset

1. UI sends `POST /api/auth/reset/request`.
2. Server returns generic success (and optional token in demo mode).
3. UI sends `POST /api/auth/reset/confirm` with token + new password.
4. Server validates reset token claims and updates password hash.

#### Security revoke-all

1. UI sends `POST /api/auth/sessions/revoke-all` with Bearer token.
2. Server resolves `CurrentUser` with current `session_id`.
3. Server revokes all other sessions for user/tenant.
4. UI refreshes `GET /api/auth/sessions`.

---

## Phase 3 ‚Äî Gap analysis & parity plan (–ø–æ–ª–Ω—ã–π —Ç–µ–∫—Å—Ç)

This section compares the current implementation with the target Phase 3 scope
and adds parity guidance for a unified admin UX.

### Scope source

Phase 3 target scope is defined in this document:

- Auth core (`/login`)
- Password recovery (`/reset`)
- Registration and invites (`/register` + invite acceptance)
- Profile and security (`/profile`, `/security`)
- RU/EN localization for UI, validation, and auth emails
- Audit events for auth/security actions

### Status legend

- ‚úÖ Done ‚Äî feature works end-to-end in the app
- üü° Partial ‚Äî route/UI exists, but endpoint wiring or behavior is incomplete
- ‚ùå Missing ‚Äî feature not yet implemented

### Route map parity snapshot

| Route | Leptos admin (`apps/admin`) | Next admin (`apps/next-admin`) | Notes |
| --- | --- | --- | --- |
| `/login` | ‚úÖ | ‚úÖ (`/[locale]/login`) | Both implement tenant + email + password login flow. |
| `/register` | ‚úÖ | ‚úÖ (`/[locale]/register`) | API-wired in both admin apps. |
| `/reset` | ‚úÖ | ‚úÖ (`/[locale]/reset`) | Reset request/confirm wired in both admin apps. |
| `/profile` | ‚úÖ | ‚úÖ (`/[locale]/profile`) | Profile update endpoint wired in both admin apps. |
| `/security` | ‚úÖ | ‚úÖ (`/[locale]/security`) | Sessions/history/change-password/revoke-all are API-wired. |

### Detailed phase checklist

#### Track A ‚Äî Auth core

| Capability | Leptos | Next | Gap / action |
| --- | --- | --- | --- |
| Login form fields (tenant, email, password) | ‚úÖ | ‚úÖ | Keep validation and error mapping identical. |
| Login request to backend | ‚úÖ | ‚úÖ | Both already call `/api/auth/login`. |
| Guard unauthenticated routes | ‚úÖ | ‚úÖ | Keep redirect behavior aligned for all protected routes. |
| Locale switch + persistence | ‚úÖ | üü° | Next has locale routes, but explicit auth-locale persistence policy should match Leptos. |

#### Track B ‚Äî Password recovery

| Capability | Leptos | Next | Gap / action |
| --- | --- | --- | --- |
| Reset request UI | ‚úÖ | ‚úÖ | Implemented in both apps with tenant-aware request. |
| Reset token + new password flow | ‚úÖ | ‚úÖ | Both use `/api/auth/reset/confirm`. |
| Token expiry UX | üü° | üü° | Contract supports expiry; dedicated UX state can be improved. |

#### Track C ‚Äî Registration & invites

| Capability | Leptos | Next | Gap / action |
| --- | --- | --- | --- |
| Registration form | ‚úÖ | ‚úÖ | Both use `/api/auth/register`. |
| Invite acceptance | ‚ùå | ‚ùå | Add invite endpoint + page in both apps. |
| Email verification + resend | ‚ùå | ‚ùå | Add verify/resend flow and localized feedback. |

#### Track D ‚Äî Profile & security

| Capability | Leptos | Next | Gap / action |
| --- | --- | --- | --- |
| Profile editing (name, avatar, timezone, language) | üü° | üü° | Name update is wired; avatar/timezone/language persistence still pending backend fields. |
| Change password | ‚úÖ | ‚úÖ | Both call `/api/auth/change-password`. |
| Active sessions list | ‚úÖ | ‚úÖ | Both call `/api/auth/sessions`. |
| Login history | ‚úÖ | ‚úÖ | Both call `/api/auth/history`; pagination/audit enrichment remains future work. |
| Sign out all sessions | ‚úÖ | ‚úÖ | Both call `/api/auth/sessions/revoke-all`. |

### Shared UX and component-system parity (shadcn/ui)

To keep identical look-and-feel and behavior in both admin apps, enforce a shared
component contract independent of framework:

1. **Design token parity**
   - Color scale, spacing, radius, typography, shadows
   - Semantic tokens for states: `success`, `warning`, `destructive`, `muted`
2. **Component behavior parity**
   - Input validation timing (`onBlur` / `onSubmit`)
   - Button loading/disabled semantics
   - Alert and inline error presentation
3. **Form contract parity**
   - Same field order and labels for auth/security forms
   - Same backend error-code mapping to i18n keys (`errors.*`)
4. **State UX parity**
   - Loading skeletons/spinners
   - Empty states (sessions/history)
   - Retry/error banners
5. **Accessibility parity**
   - Focus ring + keyboard navigation
   - Label/input associations
   - `aria-live` for async validation and submit errors

### Practical implementation recommendation

Create a shared "Admin UI Contract" doc with:

- canonical component names (`Button`, `Input`, `Select`, `Alert`, `Card`, `Dialog`)
- required props/states and interaction rules
- visual snapshots for default/hover/focus/error/disabled states
- page-level wireframes for `login/register/reset/profile/security`

Then align:

- `apps/next-admin` components (already shadcn-based)
- `apps/admin` components to the same contract (shadcn-style API and states)

### Priority delivery plan (2 sprints)

> Note: route rollout and core endpoint wiring from the earlier plan are complete
> (`/register`, `/reset`, `/profile`, `/security` in both admin apps). This plan
> is intentionally trimmed to the remaining Phase 3 scope.

#### Sprint 1 (scope-closure: invites + verification)

1. Implement invite acceptance end-to-end (backend contract + both admin UIs).
2. Add invite expiry handling and localized user-facing states.
3. Implement email verification flow + resend action (backend + both UIs).
4. Localize verification/invite/reset transactional templates in RU/EN.

#### Sprint 2 (security observability + profile completeness)

1. Emit/store auth-security audit events (login success/fail, password changed,
   session invalidation, verification changes, invite accepted/expired).
2. Surface a dedicated audit feed in admin UI (separate from session history).
3. Complete profile model persistence: avatar, timezone, preferred language,
   with explicit user-facing vs admin UI language behavior.
4. Add explicit reset-token-expired UX state with recovery CTA in both apps.

### Definition of done (Phase 3 admin)

Phase 3 can be considered done when:

- Both admin apps expose and protect all target routes:
  `/login`, `/register`, `/reset`, `/profile`, `/security`.
- All auth/security flows are API-wired (not static/demo-only).
- RU/EN coverage is complete for UI + validation + transactional auth emails.
- Audit events are emitted and visible for login/security actions.
- UI parity checks confirm equivalent states and interactions in Leptos and Next.

---

## Phase 4 ‚Äî –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è UI‚Äë—à–∞–±–ª–æ–Ω–∞ –¥–ª—è –∞–¥–º–∏–Ω–æ–∫ (–ø–æ–ª–Ω—ã–π —Ç–µ–∫—Å—Ç)

–¶–µ–ª—å: –∞–∫–∫—É—Ä–∞—Ç–Ω–æ ¬´–Ω–∞—Ç—è–Ω—É—Ç—å¬ª –Ω–æ–≤—ã–π UI-—à–∞–±–ª–æ–Ω –Ω–∞ –æ–±–µ –∞–¥–º–∏–Ω–∫–∏ (Leptos –∏ Next.js), —Å–æ—Ö—Ä–∞–Ω–∏–≤ –µ–¥–∏–Ω—ã–π UX, —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —Ç–µ–∫—É—â–∏–º–∏ API –∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º–∏ Phase 3.

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∏ –∞—É–¥–∏—Ç

1. –ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å –∏—Å—Ö–æ–¥–Ω—ã–µ —Ü–µ–ª–∏ (scope Phase 3 –∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –ø–∞—Ä–∏—Ç–µ—Ç—É).
   - –î–æ–∫—É–º–µ–Ω—Ç—ã: —Å–º. —Ä–∞–∑–¥–µ–ª—ã Phase 3 –≤ —ç—Ç–æ–º –¥–æ–∫—É–º–µ–Ω—Ç–µ (scope/architecture/gap analysis).
2. –°–Ω—è—Ç—å –∏–Ω–≤–µ–Ω—Ç–∞—Ä–∏–∑–∞—Ü–∏—é —à–∞–±–ª–æ–Ω–∞:
   - –°–ø–∏—Å–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü, layouts, UI-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤, —Ç–æ–∫–µ–Ω—ã –¥–∏–∑–∞–π–Ω–∞, —Ç–∏–ø–æ–≥—Ä–∞—Ñ–∏–∫–∞.
   - –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (Tailwind/shadcn/ui/–∏–∫–æ–Ω–∫–∏/—Ç–∞–±–ª–∏—Ü—ã/—Ñ–æ—Ä–º—ã).
3. –°–Ω—è—Ç—å –∏–Ω–≤–µ–Ω—Ç–∞—Ä–∏–∑–∞—Ü–∏—é —Ç–µ–∫—É—â–∏—Ö –∞–¥–º–∏–Ω–æ–∫:
   - –†–µ–∞–ª—å–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã (`/login`, `/register`, `/reset`, `/profile`, `/security`, `/users`).
   - –û—Å–Ω–æ–≤–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è (loading/empty/error), —Ñ–æ—Ä–º—ã –∏ —Ç–∞–±–ª–∏—Ü—ã.
4. –°–æ–≥–ª–∞—Å–æ–≤–∞—Ç—å ¬´UI –∫–æ–Ω—Ç—Ä–∞–∫—Ç¬ª –º–µ–∂–¥—É –∞–¥–º–∏–Ω–∫–∞–º–∏:
   - –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å—Ç—Ä–∞–Ω–∏—Ü –∏ –±–∞–∑–æ–≤—ã–µ —à–∞–±–ª–æ–Ω—ã (layout/sidebar/header).
   - –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã: –∫–Ω–æ–ø–∫–∏, –∏–Ω–ø—É—Ç—ã, —Ç–∞–±–ª–∏—Ü—ã, –º–æ–¥–∞–ª–∫–∏, –∞–ª–µ—Ä—Ç—ã.

### 2. –ö–∞—Ä—Ç–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–π (Template ‚Üí RusToK)

1. –¢–∞–±–ª–∏—Ü–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–π —Å—Ç—Ä–∞–Ω–∏—Ü:
   - –®–∞–±–ª–æ–Ω–Ω—ã–µ —ç–∫—Ä–∞–Ω—ã ‚Üí —Ä–µ–∞–ª—å–Ω—ã–µ —Ä–æ—É—Ç—ã –∞–¥–º–∏–Ω–∫–∏.
2. –¢–∞–±–ª–∏—Ü–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:
   - –≠–ª–µ–º–µ–Ω—Ç—ã —à–∞–±–ª–æ–Ω–∞ ‚Üí shadcn/ui –∏–ª–∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã.
3. –ö–∞—Ä—Ç–∞ —Ç–æ–∫–µ–Ω–æ–≤:
   - –¶–≤–µ—Ç–∞, –æ—Ç—Å—Ç—É–ø—ã, —Ç–∏–ø–æ–≥—Ä–∞—Ñ–∏–∫–∞ ‚Üí –¥–∏–∑–∞–π–Ω-—Ç–æ–∫–µ–Ω—ã, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –≤ –æ–±–æ–∏—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö.

### 3. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ Next.js –∞–¥–º–∏–Ω–∫—É (`apps/next-admin`)

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å/—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —à–∞–±–ª–æ–Ω–∞.
2. –ü–æ–¥–∫–ª—é—á–∏—Ç—å layout –∏ –Ω–∞–≤–∏–≥–∞—Ü–∏—é:
   - –ü—Ä–∏–≤–µ—Å—Ç–∏ sidebar –∏ topbar –∫ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—É –∏ —Ä–æ—É—Ç–∏–Ω–≥—É RusToK.
3. –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ –∫–ª—é—á–µ–≤—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤ –ø–æ—Ä—è–¥–∫–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞:
   1) Login/Register/Reset/Profile/Security
   2) Users list/details
   3) Dashboard widgets
4. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å i18n:
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è `next-intl` —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ–¥ –Ω–æ–≤—ã–µ UI –±–ª–æ–∫–∏.
5. –ü–æ–¥–∫–ª—é—á–∏—Ç—å API-–∫–ª–∏–µ–Ω—Ç—ã –∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è:
   - –ó–∞–≥—Ä—É–∑–∫–∞, –æ—à–∏–±–∫–∏, –ø—É—Å—Ç—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è, –ø–∞–≥–∏–Ω–∞—Ü–∏—è.

### 4. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ Leptos –∞–¥–º–∏–Ω–∫—É (`apps/admin`)

1. –°–æ–∑–¥–∞—Ç—å Leptos-—ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç—ã —à–∞–±–ª–æ–Ω–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:
   - shadcn-style API –∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è (loading/empty/error/disabled).
2. –í—ã—Ä–æ–≤–Ω—è—Ç—å layout –∏ –Ω–∞–≤–∏–≥–∞—Ü–∏—é:
   - –ö–æ–Ω—Ç—Ä–∞–∫—Ç —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å Next.js –≤–µ—Ä—Å–∏–µ–π.
3. –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Ç–µ–º –∂–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º, —á—Ç–æ –∏ –¥–ª—è Next.js.
4. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å i18n:
   - –î–æ–±–∞–≤–∏—Ç—å/–æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–æ–∫–∏ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–ª—è –Ω–æ–≤—ã—Ö UI –±–ª–æ–∫–æ–≤.
5. –ü–æ–¥–∫–ª—é—á–∏—Ç—å API-—Å–ª–æ–π –∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã —Å–æ—Å—Ç–æ—è–Ω–∏—è.

### 5. –ü–∞—Ä–∏—Ç–µ—Ç –∏ –∫–æ–Ω—Ç—Ä–æ–ª—å –∫–∞—á–µ—Å—Ç–≤–∞

1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–∏–∑—É–∞–ª—å–Ω—ã–π –ø–∞—Ä–∏—Ç–µ—Ç (pixel/spacing):
   - –°—Ä–∞–≤–Ω–∏—Ç—å –∫–ª—é—á–µ–≤—ã–µ —ç–∫—Ä–∞–Ω—ã (Login, Users, Profile).
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–≤–µ–¥–µ–Ω–∏–µ:
   - –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫, –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö.
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å:
   - –ö–æ–Ω—Ç—Ä–∞—Å—Ç, —Ñ–æ–∫—É—Å, aria-–∞—Ç—Ä–∏–±—É—Ç—ã.
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:
   - –†–∞–∑–º–µ—Ä –±–∞–Ω–¥–ª–∞, —Å–∫–æ—Ä–æ—Å—Ç—å —Ä–µ–Ω–¥–µ—Ä–∞ –∫–ª—é—á–µ–≤—ã—Ö —ç–∫—Ä–∞–Ω–æ–≤.

### 6. –ü–ª–∞–Ω –≤–Ω–µ–¥—Ä–µ–Ω–∏—è –∏ –æ—Ç–∫–∞—Ç–∞

1. –í–Ω–µ–¥—Ä—è—Ç—å –ø–æ —à–∞–≥–∞–º: —Å–Ω–∞—á–∞–ª–∞ Next.js, –∑–∞—Ç–µ–º Leptos (–∏–ª–∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –ø–æ —ç–∫—Ä–∞–Ω–∞–º).
2. –î–ª—è –∫–∞–∂–¥–æ–≥–æ —à–∞–≥–∞:
   - –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π –ø—Ä–æ–≥–æ–Ω (dev) + –≤–∏–∑—É–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞.
3. –û—Ç–∫–∞—Ç:
   - –§–∏—á–∞-—Ñ–ª–∞–≥ –∏–ª–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –≤–µ—Ç–∫–∏/—Ä–µ–ª–∏–∑—ã.

### 7. Definition of Done (DoD)

- –í—Å–µ Phase 3 –º–∞—Ä—à—Ä—É—Ç—ã –≤–∏–∑—É–∞–ª—å–Ω–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç —à–∞–±–ª–æ–Ω—É –≤ –æ–±–µ–∏—Ö –∞–¥–º–∏–Ω–∫–∞—Ö.
- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏–º–µ—é—Ç –µ–¥–∏–Ω—ã–π UI –∫–æ–Ω—Ç—Ä–∞–∫—Ç –∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è.
- –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–∫—Ä—ã–≤–∞–µ—Ç –Ω–æ–≤—ã–µ UI —Å—Ç—Ä–æ–∫–∏.
- –ù–µ—Ç —Ä–µ–≥—Ä–µ—Å—Å–∏–π –ø–æ API/–≤–∞–ª–∏–¥–∞—Ü–∏–∏/—Ä–æ—É—Ç–∏–Ω–≥—É.
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –∏ —Å–æ–¥–µ—Ä–∂–∏—Ç —Å—Å—ã–ª–∫–∏ –Ω–∞ —à–∞–±–ª–æ–Ω –∏ –ø–ª–∞–Ω –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏.

This is an alpha version and requires clarification. Be careful, there may be errors in the text. So that no one thinks that this is an immutable rule.
