# План интеграции шаблона для админок RusToK

Цель: аккуратно «натянуть» новый UI-шаблон на обе админки (Leptos и Next.js), сохранив единый UX, совместимость с текущими API и требованиями Phase 3.

## 1. Подготовка и аудит

1. Зафиксировать исходные цели (scope Phase 3 и требования к паритету).
   - Документы: `docs/admin-auth-phase3.md`, `docs/admin-phase3-architecture.md`, `docs/admin-phase3-gap-analysis.md`.
2. Снять инвентаризацию шаблона:
   - Список страниц, layouts, UI-компонентов, токены дизайна, типографика.
   - Зависимости (Tailwind/shadcn/ui/иконки/таблицы/формы).
3. Снять инвентаризацию текущих админок:
   - Реальные маршруты (`/login`, `/register`, `/reset`, `/profile`, `/security`, `/users`).
   - Основные состояния (loading/empty/error), формы и таблицы.
4. Согласовать «UI контракт» между админками:
   - Структура страниц и базовые шаблоны (layout/sidebar/header).
   - Компоненты: кнопки, инпуты, таблицы, модалки, алерты.

## 2. Карта соответствий (Template → RusToK)

1. Таблица соответствий страниц:
   - Шаблонные экраны → реальные роуты админки.
2. Таблица соответствий компонентов:
   - Элементы шаблона → shadcn/ui или внутренние компоненты.
3. Карта токенов:
   - Цвета, отступы, типографика → дизайн-токены, используемые в обоих проектах.

## 3. Интеграция в Next.js админку (`apps/next-admin`)

1. Установить/синхронизировать зависимости шаблона.
2. Подключить layout и навигацию:
   - Привести sidebar и topbar к контракту и роутингу RusToK.
3. Перенести ключевые страницы в порядке приоритета:
   1) Login/Register/Reset/Profile/Security
   2) Users list/details
   3) Dashboard widgets
4. Синхронизировать i18n:
   - Интеграция `next-intl` сообщений под новые UI блоки.
5. Подключить API-клиенты и состояния:
   - Загрузка, ошибки, пустые состояния, пагинация.

## 4. Интеграция в Leptos админку (`apps/admin`)

1. Создать Leptos-эквиваленты шаблонных компонентов:
   - shadcn-style API и состояния (loading/empty/error/disabled).
2. Выровнять layout и навигацию:
   - Контракт совпадает с Next.js версией.
3. Перенести страницы тем же приоритетом, что и для Next.js.
4. Синхронизировать i18n:
   - Добавить/обновить строки локализации для новых UI блоков.
5. Подключить API-слой и контракты состояния.

## 5. Паритет и контроль качества

1. Проверить визуальный паритет (pixel/spacing):
   - Сравнить ключевые экраны (Login, Users, Profile).
2. Проверить поведение:
   - Валидация форм, обработка ошибок, загрузка данных.
3. Проверить доступность:
   - Контраст, фокус, aria-атрибуты.
4. Проверить производительность:
   - Размер бандла, скорость рендера ключевых экранов.

## 6. План внедрения и отката

1. Внедрять по шагам: сначала Next.js, затем Leptos (или параллельно по экранам).
2. Для каждого шага:
   - Демонстрационный прогон (dev) + визуальная проверка.
3. Откат:
   - Фича-флаг или переключение через ветки/релизы.

## 7. Definition of Done (DoD)

- Все Phase 3 маршруты визуально соответствуют шаблону в обеих админках.
- Компоненты имеют единый UI контракт и состояния.
- Локализация покрывает новые UI строки.
- Нет регрессий по API/валидации/роутингу.
- Документация обновлена и содержит ссылки на шаблон и план интеграции.
