# RusToK Module Manifest
# Этот файл определяет состав модулей для сборки
# Изменение = пересборка проекта

schema = 1
app = "rustok-server"

[build]
target = "x86_64-unknown-linux-gnu"
profile = "release"
deployment_profile = "monolith" # monolith | headless

[modules]
# Core modules (required)
content = { crate = "rustok-content", source = "path", path = "crates/rustok-content", required = true }
index = { crate = "rustok-index", source = "path", path = "crates/rustok-index", required = true }
outbox = { crate = "rustok-outbox", source = "path", path = "crates/rustok-outbox", required = true }

# Domain modules (optional)
commerce = { crate = "rustok-commerce", source = "path", path = "crates/rustok-commerce" }
blog = { crate = "rustok-blog", source = "path", path = "crates/rustok-blog", depends_on = ["content"] }
forum = { crate = "rustok-forum", source = "path", path = "crates/rustok-forum", depends_on = ["content"] }
pages = { crate = "rustok-pages", source = "path", path = "crates/rustok-pages" }
alloy = { crate = "alloy-scripting", source = "path", path = "crates/alloy-scripting" }

# Platform lifecycle modules (Core in ModuleRegistry)
tenant = { crate = "rustok-tenant", source = "path", path = "crates/rustok-tenant", required = true }
rbac = { crate = "rustok-rbac", source = "path", path = "crates/rustok-rbac", required = true }

[settings]
default_enabled = ["content", "commerce", "pages"]
